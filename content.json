{"meta":{"title":"Hexo","subtitle":"","description":"","author":"John Doe","url":"http://example.com","root":"/"},"pages":[],"posts":[{"title":"","slug":"WordPress-主页显示异常","date":"2024-03-24T06:32:23.356Z","updated":"2024-03-20T03:44:37.938Z","comments":true,"path":"2024/03/24/WordPress-主页显示异常/","permalink":"http://example.com/2024/03/24/WordPress-%E4%B8%BB%E9%A1%B5%E6%98%BE%E7%A4%BA%E5%BC%82%E5%B8%B8/","excerpt":"","text":"生产日期2023-07-07 13:17 问题 一个网站从 一台服务器搬迁到另外 一台服务器 因为是docker部署的，我连docker启动配置文件都是照抄的，数据库目录什么的都是一模一样的 当我启动docker，访问原来的主页的时候，他却是只有文字，没有图片等内容，犹如网速很慢很多内容没有加载出来一样 对于这个 问题，表面上就是CSS没有加载的感觉，当然我也不知道CSS是啥 问题点说明 该问题是WordPress数据库里面对于访问地址不正确所导致的，对此需要这么做 登陆WordPress的容器 从WordPress的容器中，跳转登陆到没有端口号的MySQL数据库 用查询语句更新关键字段 处理步骤 登陆MYSQL注意容器名字，特别是数据库名字是否正确在登陆数据库的时候有账户名密码，这个是建立docker的时候配置文件中自定的，可以去[[WordPress-博客]]中查看 123docker exec -it wordpress-db-1 bashmysql -u wd_db_user -puse wordpress_db 查询错误网址主要就是用来看下现在的登陆网址是否有问题 12345678SELECT * FROM wp_options WHERE option_name = &#x27;home&#x27; OR option_name = &#x27;siteurl&#x27;;+-----------+-------------+-----------------------------+----------+| option_id | option_name | option_value | autoload |+-----------+-------------+-----------------------------+----------+| 2 | home | http://139.224.37.141:8500/ | yes || 1 | siteurl | http://139.224.37.141:8500/ | yes |+-----------+-------------+-----------------------------+----------+2 rows in set (0.00 sec) 如上是查询命令，其实需要修改的就是这两个字段中的option_value 修正问题 12345# 可以先把这两个字段设置成空UPDATE wp_options SET option_value = &#x27;&#x27; WHERE option_name = &#x27;home&#x27; OR option_name = &#x27;siteurl&#x27;;# 设置成想要的UPDATE wp_options SET option_value = &#x27;http://139.224.37.141:8500/&#x27; WHERE option_name = &#x27;home&#x27; OR option_name = &#x27;siteurl&#x27;; 处理图片问题 在网站搬家之后如果已经通过如上方式解决了网页无法现实或者显示错乱的问题，那么之后你会遇到图片大部分出现问你，在转圈圈等情况，对于之前上传过的图片无法加载的问题，可以通过类似方法通过mysql更新数据库中对于图片的网址来解决 对wordpress网站图片迁移后的访问问题,可以通过数据库来更新图片的URL地址 登录wordpress数据库,找到wp_posts表,该表包含了所有文章和页面的内容 运行如下SQL查询,筛选出图片类型的帖子:1SELECT * FROM wp_posts WHERE post_type = &#x27;attachment&#x27;; 这样可以提取出所有附件,也就是图片posts。 然后需要修改这些posts的 guid和post_content字段中的图片URL地址: guid字段保存着图片原始URL post_content字段中可能还有图片URL作为HTML标签属性 可以使用REPLACE函数来批量替换URL: 1234UPDATE wp_postsSET guid = REPLACE(guid, &#x27;old-domain&#x27;, &#x27;new-domain&#x27;),post_content = REPLACE(post_content, &#x27;old-domain&#x27;, &#x27;new-domain&#x27;)WHERE post_type = &#x27;attachment&#x27;; 1234UPDATE wp_postsSET guid = REPLACE(guid, &#x27;https://zhiqiansoft.com/&#x27;, &#x27;http://139.224.37.141:8500/&#x27;),post_content = REPLACE(post_content, &#x27;https://zhiqiansoft.com/&#x27;, &#x27;https://zhiqiansoft.com&#x27;)WHERE post_type = &#x27;attachment&#x27;; 参考 如果要粗暴的备份方法，可以看[[WordPress-备份]]","categories":[],"tags":[]},{"title":"Hello World","slug":"hello-world","date":"2024-03-24T06:26:46.827Z","updated":"2024-03-24T06:26:46.828Z","comments":true,"path":"2024/03/24/hello-world/","permalink":"http://example.com/2024/03/24/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot; More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[]}],"categories":[],"tags":[]}